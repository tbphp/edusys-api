import{P as G,_ as f,d as Y,u as q,b as P,f as ue,e as j,c as H,a2 as F,a7 as pe,h as K,k as ce,a6 as W,n as ve,R as ye,r as fe,a as T}from"./index.e2c76f91.js";import{D as me}from"./Dropdown.d95ea83c.js";import{R as ge}from"./index.2ff8b4ca.js";import{l as be,a as J,B as L,c as z}from"./api.6c619aa7.js";import{E as he,g as Ce}from"./index.40f3feba.js";import{o as Pe}from"./styleChecker.246fbcd2.js";var Q=function(){return{arrow:{type:[Boolean,Object],default:void 0},trigger:{type:[Array,String]},overlay:G.any,visible:{type:Boolean,default:void 0},disabled:{type:Boolean,default:void 0},align:{type:Object},getPopupContainer:Function,prefixCls:String,transitionName:String,placement:String,overlayClassName:String,overlayStyle:{type:Object,default:void 0},forceRender:{type:Boolean,default:void 0},mouseEnterDelay:Number,mouseLeaveDelay:Number,openClassName:String,minOverlayWidthMatchTrigger:{type:Boolean,default:void 0},destroyPopupOnHide:{type:Boolean,default:void 0},onVisibleChange:{type:Function},"onUpdate:visible":{type:Function}}},A=be(),we=function(){return f(f({},Q()),{},{type:A.type,size:String,htmlType:A.htmlType,href:String,disabled:{type:Boolean,default:void 0},prefixCls:String,icon:G.any,title:String,loading:A.loading,onClick:{type:Function}})},Ne=["type","disabled","loading","htmlType","class","overlay","trigger","align","visible","onVisibleChange","placement","href","title","icon","mouseEnterDelay","mouseLeaveDelay","overlayClassName","overlayStyle","destroyPopupOnHide","onClick","onUpdate:visible"],_e=L.Group;const I=Y({compatConfig:{MODE:3},name:"ADropdownButton",inheritAttrs:!1,__ANT_BUTTON:!0,props:J(we(),{trigger:"hover",placement:"bottomRight",type:"default"}),slots:["icon","leftButton","rightButton","overlay"],setup:function(l,p){var n=p.slots,w=p.attrs,m=p.emit,g=function(b){m("update:visible",b),m("visibleChange",b)},d=q("dropdown-button",l),_=d.prefixCls,r=d.direction,c=d.getPopupContainer;return function(){var u,b,e=f(f({},l),w),O=e.type,t=O===void 0?"default":O,o=e.disabled,i=e.loading,N=e.htmlType,v=e.class,y=v===void 0?"":v,s=e.overlay,D=s===void 0?(u=n.overlay)===null||u===void 0?void 0:u.call(n):s,$=e.trigger,h=e.align,C=e.visible;e.onVisibleChange;var B=e.placement,x=B===void 0?r.value==="rtl"?"bottomLeft":"bottomRight":B,E=e.href,Z=e.title,k=e.icon,ee=k===void 0?((b=n.icon)===null||b===void 0?void 0:b.call(n))||P(he,null,null):k,te=e.mouseEnterDelay,oe=e.mouseLeaveDelay,ne=e.overlayClassName,ae=e.overlayStyle,re=e.destroyPopupOnHide,le=e.onClick;e["onUpdate:visible"];var ie=ue(e,Ne),se={align:h,disabled:o,trigger:o?[]:$,placement:x,getPopupContainer:c.value,onVisibleChange:g,mouseEnterDelay:te,mouseLeaveDelay:oe,visible:C,overlayClassName:ne,overlayStyle:ae,destroyPopupOnHide:re},R=P(L,{type:t,disabled:o,loading:i,onClick:le,htmlType:N,href:E,title:Z},{default:n.default}),U=P(L,{type:t,icon:ee},null);return P(_e,f(f({},ie),{},{class:j(_.value,y)}),{default:function(){return[n.leftButton?n.leftButton({button:R}):R,P(S,se,{default:function(){return[n.rightButton?n.rightButton({button:U}):U]},overlay:function(){return D}})]}})}}});var X=Y({compatConfig:{MODE:3},name:"ADropdown",inheritAttrs:!1,props:J(Q(),{mouseEnterDelay:.15,mouseLeaveDelay:.1,placement:"bottomLeft",trigger:"hover"}),slots:["overlay"],setup:function(l,p){var n=p.slots,w=p.attrs,m=p.emit,g=q("dropdown",l),d=g.prefixCls,_=g.rootPrefixCls,r=g.direction,c=g.getPopupContainer,u=H(function(){var t=l.placement,o=t===void 0?"":t,i=l.transitionName;return i!==void 0?i:o.indexOf("top")>=0?"".concat(_.value,"-slide-down"):"".concat(_.value,"-slide-up")}),b=function(){var o,i,N,v=l.overlay||((o=n.overlay)===null||o===void 0?void 0:o.call(n)),y=Array.isArray(v)?v[0]:v;if(!y)return null;var s=y.props||{};F(!s.mode||s.mode==="vertical","Dropdown",'mode="'.concat(s.mode,`" is not supported for Dropdown's Menu.`));var D=s.selectable,$=D===void 0?!1:D,h=s.expandIcon,C=h===void 0?(i=y.children)===null||i===void 0||(N=i.expandIcon)===null||N===void 0?void 0:N.call(i):h,B=typeof C<"u"&&W(C)?C:P("span",{class:"".concat(d.value,"-menu-submenu-arrow")},[P(ge,{class:"".concat(d.value,"-menu-submenu-arrow-icon")},null)]),x=W(y)?z(y,{mode:"vertical",selectable:$,expandIcon:function(){return B}}):y;return x},e=H(function(){var t=l.placement;if(!t)return r.value==="rtl"?"bottomRight":"bottomLeft";if(t.includes("Center")){var o=t.slice(0,t.indexOf("Center"));return F(!t.includes("Center"),"Dropdown","You are using '".concat(t,"' placement in Dropdown, which is deprecated. Try to use '").concat(o,"' instead.")),o}return t}),O=function(o){m("update:visible",o),m("visibleChange",o)};return function(){var t,o,i=l.arrow,N=l.trigger,v=l.disabled,y=l.overlayClassName,s=(t=n.default)===null||t===void 0?void 0:t.call(n)[0],D=z(s,pe({class:j(s==null||(o=s.props)===null||o===void 0?void 0:o.class,K({},"".concat(d.value,"-rtl"),r.value==="rtl"),"".concat(d.value,"-trigger"))},v?{disabled:v}:{})),$=j(y,K({},"".concat(d.value,"-rtl"),r.value==="rtl")),h=v?[]:N,C;h&&h.indexOf("contextmenu")!==-1&&(C=!0);var B=Ce({arrowPointAtCenter:ce(i)==="object"&&i.pointAtCenter,autoAdjustOverflow:!0}),x=Pe(f(f(f({},l),w),{},{builtinPlacements:B,overlayClassName:$,arrow:i,alignPoint:C,prefixCls:d.value,getPopupContainer:c.value,transitionName:u.value,trigger:h,onVisibleChange:O,placement:e.value}),["overlay","onUpdate:visible"]);return P(me,x,{default:function(){return[D]},overlay:b})}}});X.Button=I;const S=X;S.Button=I;S.install=function(a){return a.component(S.name,S),a.component(I.name,I),a};const V=ve();function M(a){return`${a.identity}-${a.id}`}const De=M({identity:V.identity,id:V.userId,name:V.name}),Ee=ye(`msgdata-${De}`,()=>{const a=fe({}),l=T(!1),p=T(0),n=T(!1),w=T("");function m(r,c){a[r]||(a[r]={unread:!1,user:c,list:[]})}function g(r,c){const u=M(r);m(u,r),a[u].list.push(c),a[u].user=r,(!n.value||u!==w.value)&&(a[u].unread=!0,l.value=!0)}function d(r){p.value=r}function _(r){const c=M(r);m(c,r),w.value=c,n.value=!0}return{messageStore:a,hasNew:l,lastMessageId:p,activeKey:w,showBox:n,addMsg:g,setLastId:d,openNewSession:_}},{persist:[{paths:["messageStore","hasNew","lastMessageId","activeKey"],storage:localStorage}]});export{S as D,Ee as u};
