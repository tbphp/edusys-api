import{P as G,_ as m,d as Y,u as q,b as P,f as ue,e as j,c as H,a2 as F,a7 as ce,h as K,k as pe,a6 as W,n as ve,R as fe,r as ye,a as T,w as me}from"./index.961df8a6.js";import{D as ge}from"./Dropdown.218e3c88.js";import{R as be}from"./index.2e28b626.js";import{l as he,a as J,B as L,c as z}from"./api.2ab6e22f.js";import{E as Ce,g as we}from"./index.b8c697d7.js";import{o as Pe}from"./styleChecker.d9f39f59.js";var Q=function(){return{arrow:{type:[Boolean,Object],default:void 0},trigger:{type:[Array,String]},overlay:G.any,visible:{type:Boolean,default:void 0},disabled:{type:Boolean,default:void 0},align:{type:Object},getPopupContainer:Function,prefixCls:String,transitionName:String,placement:String,overlayClassName:String,overlayStyle:{type:Object,default:void 0},forceRender:{type:Boolean,default:void 0},mouseEnterDelay:Number,mouseLeaveDelay:Number,openClassName:String,minOverlayWidthMatchTrigger:{type:Boolean,default:void 0},destroyPopupOnHide:{type:Boolean,default:void 0},onVisibleChange:{type:Function},"onUpdate:visible":{type:Function}}},A=he(),Ne=function(){return m(m({},Q()),{},{type:A.type,size:String,htmlType:A.htmlType,href:String,disabled:{type:Boolean,default:void 0},prefixCls:String,icon:G.any,title:String,loading:A.loading,onClick:{type:Function}})},_e=["type","disabled","loading","htmlType","class","overlay","trigger","align","visible","onVisibleChange","placement","href","title","icon","mouseEnterDelay","mouseLeaveDelay","overlayClassName","overlayStyle","destroyPopupOnHide","onClick","onUpdate:visible"],De=L.Group;const I=Y({compatConfig:{MODE:3},name:"ADropdownButton",inheritAttrs:!1,__ANT_BUTTON:!0,props:J(Ne(),{trigger:"hover",placement:"bottomRight",type:"default"}),slots:["icon","leftButton","rightButton","overlay"],setup:function(l,p){var o=p.slots,g=p.attrs,b=p.emit,h=function(v){b("update:visible",v),b("visibleChange",v)},u=q("dropdown-button",l),_=u.prefixCls,a=u.direction,c=u.getPopupContainer;return function(){var i,v,e=m(m({},l),g),O=e.type,n=O===void 0?"default":O,r=e.disabled,s=e.loading,N=e.htmlType,f=e.class,y=f===void 0?"":f,d=e.overlay,D=d===void 0?(i=o.overlay)===null||i===void 0?void 0:i.call(o):d,$=e.trigger,C=e.align,w=e.visible;e.onVisibleChange;var B=e.placement,x=B===void 0?a.value==="rtl"?"bottomLeft":"bottomRight":B,E=e.href,Z=e.title,M=e.icon,ee=M===void 0?((v=o.icon)===null||v===void 0?void 0:v.call(o))||P(Ce,null,null):M,te=e.mouseEnterDelay,ae=e.mouseLeaveDelay,oe=e.overlayClassName,ne=e.overlayStyle,re=e.destroyPopupOnHide,le=e.onClick;e["onUpdate:visible"];var ie=ue(e,_e),se={align:C,disabled:r,trigger:r?[]:$,placement:x,getPopupContainer:c.value,onVisibleChange:h,mouseEnterDelay:te,mouseLeaveDelay:ae,visible:w,overlayClassName:oe,overlayStyle:ne,destroyPopupOnHide:re},R=P(L,{type:n,disabled:r,loading:s,onClick:le,htmlType:N,href:E,title:Z},{default:o.default}),U=P(L,{type:n,icon:ee},null);return P(De,m(m({},ie),{},{class:j(_.value,y)}),{default:function(){return[o.leftButton?o.leftButton({button:R}):R,P(S,se,{default:function(){return[o.rightButton?o.rightButton({button:U}):U]},overlay:function(){return D}})]}})}}});var X=Y({compatConfig:{MODE:3},name:"ADropdown",inheritAttrs:!1,props:J(Q(),{mouseEnterDelay:.15,mouseLeaveDelay:.1,placement:"bottomLeft",trigger:"hover"}),slots:["overlay"],setup:function(l,p){var o=p.slots,g=p.attrs,b=p.emit,h=q("dropdown",l),u=h.prefixCls,_=h.rootPrefixCls,a=h.direction,c=h.getPopupContainer,i=H(function(){var n=l.placement,r=n===void 0?"":n,s=l.transitionName;return s!==void 0?s:r.indexOf("top")>=0?"".concat(_.value,"-slide-down"):"".concat(_.value,"-slide-up")}),v=function(){var r,s,N,f=l.overlay||((r=o.overlay)===null||r===void 0?void 0:r.call(o)),y=Array.isArray(f)?f[0]:f;if(!y)return null;var d=y.props||{};F(!d.mode||d.mode==="vertical","Dropdown",'mode="'.concat(d.mode,`" is not supported for Dropdown's Menu.`));var D=d.selectable,$=D===void 0?!1:D,C=d.expandIcon,w=C===void 0?(s=y.children)===null||s===void 0||(N=s.expandIcon)===null||N===void 0?void 0:N.call(s):C,B=typeof w<"u"&&W(w)?w:P("span",{class:"".concat(u.value,"-menu-submenu-arrow")},[P(be,{class:"".concat(u.value,"-menu-submenu-arrow-icon")},null)]),x=W(y)?z(y,{mode:"vertical",selectable:$,expandIcon:function(){return B}}):y;return x},e=H(function(){var n=l.placement;if(!n)return a.value==="rtl"?"bottomRight":"bottomLeft";if(n.includes("Center")){var r=n.slice(0,n.indexOf("Center"));return F(!n.includes("Center"),"Dropdown","You are using '".concat(n,"' placement in Dropdown, which is deprecated. Try to use '").concat(r,"' instead.")),r}return n}),O=function(r){b("update:visible",r),b("visibleChange",r)};return function(){var n,r,s=l.arrow,N=l.trigger,f=l.disabled,y=l.overlayClassName,d=(n=o.default)===null||n===void 0?void 0:n.call(o)[0],D=z(d,ce({class:j(d==null||(r=d.props)===null||r===void 0?void 0:r.class,K({},"".concat(u.value,"-rtl"),a.value==="rtl"),"".concat(u.value,"-trigger"))},f?{disabled:f}:{})),$=j(y,K({},"".concat(u.value,"-rtl"),a.value==="rtl")),C=f?[]:N,w;C&&C.indexOf("contextmenu")!==-1&&(w=!0);var B=we({arrowPointAtCenter:pe(s)==="object"&&s.pointAtCenter,autoAdjustOverflow:!0}),x=Pe(m(m(m({},l),g),{},{builtinPlacements:B,overlayClassName:$,arrow:s,alignPoint:w,prefixCls:u.value,getPopupContainer:c.value,transitionName:i.value,trigger:C,onVisibleChange:O,placement:e.value}),["overlay","onUpdate:visible"]);return P(ge,x,{default:function(){return[D]},overlay:v})}}});X.Button=I;const S=X;S.Button=I;S.install=function(t){return t.component(S.name,S),t.component(I.name,I),t};const V=ve();function k(t){return`${t.identity}-${t.id}`}const Be=k({identity:V.identity,id:V.userId,name:V.name}),Ae=fe(`msgdata-${Be}`,()=>{const t=ye({}),l=T(!1),p=T(0),o=T(!1),g=T("");me([g,o],([a,c])=>{if(c&&t[a].unread){t[a].unread=!1;let i=!1;for(const v in t)if(t[v].unread){i=!0;break}i||(l.value=!1)}});function b(a,c){t[a]||(t[a]={unread:!1,user:c,list:[]})}function h(a,c){const i=k(a);b(i,a),t[i].list.push(c),t[i].user=a,(!o.value||i!==g.value)&&(t[i].unread=!0,l.value=!0)}function u(a){p.value=a}function _(a){const c=k(a);b(c,a),g.value=c,o.value=!0}return{messageStore:t,hasNew:l,lastMessageId:p,activeKey:g,showBox:o,addMsg:h,setLastId:u,openNewSession:_}},{persist:[{paths:["messageStore","hasNew","lastMessageId","activeKey"],storage:localStorage}]});export{S as D,Ae as u};
